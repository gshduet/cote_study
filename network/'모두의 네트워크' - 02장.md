# 2장 네트워크의 기본 규칙

## LESSON 06 - 네트워크의 규칙

### - 프로토콜이란?

만약 영어를 할 줄 아는 한국인과 영어를 할 줄 아는 일본인이 만나 대화를 해야 할 상황에서 영어로 대화한다는 규칙을 정해놓지 않으면 전혀 대화가 통하지 않을 것이다.

이런 상황처럼 네트워크에서도 문제 없는 통신을 위한 규칙이 있다. 이를 **프로토콜Protocol**이라고 한다. 

군대 간 여자친구에게 편지를 보내는 남자친구의 상황을 가정해보자. 편지를 보내는 과정은 다음과 같다.

>
1. 남자친구가 편지를 쓴다.
2. 편지를 우체통에 넣는다.
3. 우체국에서 우체통에서 편지를 수거한다.
4. 수거한 편지를 우체국에서 분류한다.
5. 분류한 편지를 군부대 가까운 우체국으로 운송한다.
6. 운송된 편지를 군부대에 전달한다.
7. 여자친구는 대대 인사과에 가서 편지를 받고 읽는다.

이 과정 중 주소를 빼먹거나 우표를 붙이지 않고 2번 과정을 거친다면 우체국에서는 도와줄 수 있는 것이 없다. 그렇기 때문에 2번 과정을 통하기 전에 주소를 적고 우표를 붙이는 작업이 필요하다.

이처럼 편지를 쓰는 규칙, 편지를 보내는 규칙, 우체국만의 규칙 등 여러 규칙이 존재하며 각각의 규칙은 서로에게 영향을 주지 않는 특성이 있다.

## LESSON 07 - OSI 모델과 TCP/IP 모델

위의 편지를 보내는 것처럼 네트워크에서는 데이터 송수신을 위한 통신 규격이 정해져 있다. 이 통신 규격에 대해 알아보자

### - OSI 모델이란?

국내에서 차량제조업으로 유명한 두 회사 H사와 K사는 K사가 H사에 합병되기 전까지 불변의 라이벌이었다. 

이러한 관계와는 상관 없이 기술의 문제로 H사의 컴퓨터와 K사의 컴퓨터가 통신할 수 없던 시절이 있다. 같은 회사의 컴퓨터끼리만 통신이 가능했던 것이다. 여기에 더해 케이블을 연결하는 커넥터 역시 회사별로 다르기까지 했다. 이러한 일들이 있어 공통으로 사용할 수 있는 표준 규격을 정해야만 했다.

표준 규격을 정하는 단체는 여러 곳이 있다. 그 중 **국제 표준화 기구ISO, International Organization for Standardization**이라는 기구가 있으며 이 단체는 **OSI 모델**이라는 표준 규격을 제정했다. OSI 모델은 네트워크 기술의 기본이 되는 모델이다.

데이터의 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는 것이다. 이때 컴퓨터 내부에서는 여러 가지 일을 하는데 이러한 일을 일곱 개의 계층으로 나누어 한다. 이 일곱 개의 계층이 바로 OSI 모델이며 다음과 같다. 계층 대신 레이어라는 용어를 쓰기도 한다. 각 계층에는 다양한 프로토콜을 포함하고 있다.

![](https://images.velog.io/images/gshduet/post/6c8b819a-77bd-47bb-a73e-2dff7ea71783/image.png)

![](https://images.velog.io/images/gshduet/post/7c0fac3d-a814-40ad-9cba-1379606f43bd/image.png)
데이터를 전송하는 쪽은 상위 계층에서 하위 계층으로 데이터를 전달하며 각 계층은 독립적이르모 다른 계층의 영향을 받지 않는다. 반대로 데이터를 송신하는 쪽은 하위 계층에서 상의 계층으로 전달된 데이터를 받게 된다.

### - TCP/IP 모델이란?

OSI 7계층을 4계층으로 바꿔서 생각한다면 이해가 더 쉬울 것이다. 이 4계층 모델을 TCP/IP 모델이라고 한다. TCP/IP 모델은 응용 계층 - 전송 계층 - 인터넷 계층 - 네트워크 접속 계층으로 나누어져 있으며 OSI 모델과 비교하면 다음과 같다.

![](https://images.velog.io/images/gshduet/post/23f74e04-55dd-4ab9-9691-b4f89cf6c5ad/image.png)

## LESSON 08 - 캡슐화와 역캡슐화

### - 캡슐화와 역캡슐화란?

A 컴퓨터에 B 컴퓨터로 데이터를 보낸다고 생각해보자. 데이터를 보내려면 데이터의 앞부분에 전송하는데 필요한 정보를 붙여 다음 계층으로 보낸다. 이 정보를 **헤더**라고 하며 헤더에는 **데이터를 받을 상대방에 대한 정보**도 포함되어 있다. 이처럼 헤더를 붙여 나가는걸 **캡슐화**라고 하며 데이터를 받은 쪽에서 헤더를 하나씩 제거하는 것을 **역캡슐화**라고 한다.

![](https://images.velog.io/images/gshduet/post/72645de1-c41f-4abf-b521-ae358a503f44/image.png)

1. 송신 측 컴퓨터에서 웹 사이트에 접속을 시도하면 응용 계층에서 웹 사이트 접속을 위한 요청 데이터가 만들어진다.

2. 만들어진 데이터는 전송 계층으로 보내지고 전송 계층에서 신뢰 가능한 통신을 위해 헤더를 붙인다.

3. 전송 계층에서 만들어진 데이터를 다른 네트워크와 통신하기 위해 네트워크 계층으로 넘겨 다시 헤더를 붙인다. 또 네트워크 계층에서 만들어진 데이터에 물리적인 통신 채널을 연결하기 위해 데이터 링크 계층에서 헤더와 트레일러를 붙인다.
	* 트레일러란 데이터를 전달할 때 데이터의 마지막에 추가하는 정보를 말함
    
4. 이렇게 데이터 링크 계층에서 만들어진 데이터는 최종적으로 전기 신호로 변환, 수신 측에 도착하고 수신측은 역순으로 각 계층의 헤더를 제거하며 데이터를 전달한다.

### - VPN

가상 사설망VPN, Virtual Private Network의 약어로 가상 통신 터널을 만들어 기업 본사나 지사와 같은 거점 간 통신을 구현하거나 외부에서 인터넷으로 사내 네트워크에 접속하는 것을 말한다. VPN은 두 종류로 구성된다

* 인터넷 VPN
인터넷 VPN에는 거점 간 접속과 원격 접속 연결이 있으며 둘 다 일반 인터넷망을 사용한다. 거점 간 접속은 IPsec이라는 암호 기술 프로토콜을 사용해 접속한다. 반면 원격 접속 연결은 외부에서 사용하는 컴퓨터를 사내 네트워크에 연결하기 때문에 암호화 된 통신로를 만든다.

* IP-VPN
IP-VPN은 MPLS라는 기술을 사용해 인터넷망이 아닌 통신 사업자 전용 폐쇄망을 사용한다. 때문에 제 3자에 의한 해킹 혹은 데이터 변조 위험이 없어 암호화가 필요 없다.